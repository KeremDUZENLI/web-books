### Answer 9.4

**Vertex Shader Implementation for Billboard Particles:**

**Input Attributes:**
* `vec3 centerPosition` (Particle position $P$)
* `float radius` ($r$)
* `float angle` ($\alpha$)
* `vec2 corner` (Per-vertex offset: (-1,-1), (1,-1), (1,1), (-1,1))

**Uniforms:**
* `mat4 mvMatrix` (Model-View Matrix)
* `mat4 projMatrix` (Projection Matrix)

**Shader Logic:**

1.  **Transform Center to View Space:**
    Calculate the view-space position of the particle center.
    `vec4 viewCenter = mvMatrix * vec4(centerPosition, 1.0);`

2.  **Construct Rotation Matrix:**
    Create a 2D rotation matrix for the orientation $\alpha$.
    ```glsl
    float c = cos(angle);
    float s = sin(angle);
    mat2 rotation = mat2(c, -s, s, c);
    ```

3.  **Calculate Vertex Offset:**
    Rotate the corner offset and scale by radius.
    `vec2 offset = rotation * corner * radius;`

4.  **Apply Offset in View Space:**
    Add the offset to the $xy$ components of the view-space center. This ensures the quad is always perpendicular to the camera (billboarding).
    `vec4 viewPos = viewCenter;`
    `viewPos.xy += offset;`

5.  **Project:**
    Transform to clip space.
    `gl_Position = projMatrix * viewPos;`

6.  **Pass Texture Coordinates:**
    Map `corner` range $[-1, 1]$ to $[0, 1]$.
    `texCoord = corner * 0.5 + 0.5;`
