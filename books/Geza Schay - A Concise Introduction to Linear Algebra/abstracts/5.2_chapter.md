# Chapter 5.2: Orthogonal Bases

---

## Main Idea

- This subchapter explains the advantages of using **orthogonal** (perpendicular) and **orthonormal** (unit length perpendicular) bases, where finding coordinates becomes a simple dot product operation rather than solving a linear system.

- It introduces the **Gram-Schmidt process**, an algorithm that converts any set of independent vectors into an orthonormal basis, and the **QR Factorization**, which is a computationally stable way to store this information for solving least-squares problems.

---

## Keywords

**Orthogonal Basis:**

- A basis where every vector is perpendicular to every other vector; this makes calculations independent, so changing one coordinate doesn't affect the others.

**Orthonormal Basis:**

- An orthogonal basis where every vector has been normalized (scaled to have a length of 1); calculation simplifies further because dividing by length is no longer needed.

**Gram-Schmidt Procedure:**

- An algorithm that takes a "messy" set of independent vectors and straightens them out one by one into a clean, orthogonal basis.

**QR Factorization:**

- A method of breaking a matrix $A$ into two parts: an orthogonal matrix $Q$ (containing the nice basis) and an upper triangular matrix $R$ (containing the construction steps).

---

## Formulas

**Orthogonal Decomposition (Coefficients)**

- **Formula:** $x_{Ai} = \frac{x \cdot a_i}{a_i \cdot a_i}$

- **Meaning:** To find how much of vector $x$ lies along basis vector $a_i$, just project $x$ onto $a_i$.

- **Use in graphics:** Decomposing a velocity vector into "forward" and "sideways" components relative to a character's orientation.

**Orthonormal Decomposition**

- **Formula:** $x = \sum (x \cdot q_i) q_i$

- **Meaning:** If the basis vectors $q_i$ are unit length, the coordinate is simply the dot product.

- **Use in graphics:** Transforming light vectors into Texture Space (Tangent Space) for normal mapping.

**Gram-Schmidt Step**

- **Formula:** $b_k = a_k - \sum_{i=1}^{k-1} \text{proj}_{b_i}(a_k)$

- **Meaning:** To get the next orthogonal vector ($b_k$), take the original vector ($a_k$) and subtract the parts of it that are parallel to the vectors you already found.

- **Use in graphics:** Ensuring the "Up", "Right", and "Forward" vectors of a camera remain perfectly perpendicular after multiple rotations.

**QR Factorization**

- **Formula:** $A = QR$

- **Meaning:** Any matrix $A$ can be written as an orthogonal matrix $Q$ times an upper triangular matrix $R$.

- **Use in graphics:** Solving systems of equations stably without inverting matrices (which can be numerically unstable).

---

## Practical Use

**Camera Re-orthogonalization**

- After many small rotations, a camera's orientation matrix can accumulate errors and become skewed (non-orthogonal). Gram-Schmidt is used to "snap" the axes back to being perfectly perpendicular.

**Tangent Space Calculation**

- When calculating the Tangent-Bitangent-Normal (TBN) matrix for a 3D model, the initial vectors might not be perpendicular. Gram-Schmidt is used to orthogonalize them so lighting calculations are accurate.

**Solving Least Squares**

- Using QR factorization ($A=QR$) transforms the difficult normal equation $A^T A x = A^T b$ into the easy-to-solve triangular system $Rx = Q^T b$.
